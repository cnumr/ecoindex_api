{"openapi":"3.0.2","info":{"title":"Ecoindex API","description":"Ecoindex API enables you to perform ecoindex analysis of given web pages","version":"1.0.0"},"paths":{"/v1/ecoindexes":{"get":{"tags":["Ecoindex"],"summary":"Get Ecoindex Analysis List","description":"This returns a list of ecoindex analysis corresponding to query filters. The results are ordered by ascending date","operationId":"get_ecoindex_analysis_list_v1_ecoindexes_get","parameters":[{"description":"Start date of the filter elements (example: 2020-01-01)","required":false,"schema":{"title":"Date From","type":"string","description":"Start date of the filter elements (example: 2020-01-01)","format":"date"},"name":"date_from","in":"query"},{"description":"End date of the filter elements  (example: 2020-01-01)","required":false,"schema":{"title":"Date To","type":"string","description":"End date of the filter elements  (example: 2020-01-01)","format":"date"},"name":"date_to","in":"query"},{"description":"Host name you want to filter","required":false,"schema":{"title":"Host","type":"string","description":"Host name you want to filter"},"name":"host","in":"query"},{"required":false,"schema":{"title":"Page","minimum":1.0,"type":"integer","default":1},"name":"page","in":"query"},{"required":false,"schema":{"title":"Size","maximum":100.0,"minimum":1.0,"type":"integer","default":50},"name":"size","in":"query"}],"responses":{"200":{"description":"List of corresponding ecoindex results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page_ApiEcoindex_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Ecoindex"],"summary":"Add Ecoindex Analysis","description":"This performs ecoindex analysis of a given webpage with a defined resolution","operationId":"add_ecoindex_analysis_v1_ecoindexes_post","requestBody":{"content":{"application/json":{"schema":{"title":"Web page to analyze defined by its url and its screen resolution","allOf":[{"$ref":"#/components/schemas/WebPage"}]},"example":{"width":1920,"height":1080,"url":"http://www.ecoindex.fr"}}},"required":true},"responses":{"201":{"description":"Corresponding ecoindex result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiEcoindex"}}}},"429":{"description":"You have reached the daily limit","content":{"application/json":{"example":{"detail":"You have already reached the daily limit of 5 requests for host www.ecoindex.fr today"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/ecoindexes/{id}":{"get":{"tags":["Ecoindex"],"summary":"Get Ecoindex Analysis By Id","description":"This returns an ecoindex given by its unique identifier","operationId":"get_ecoindex_analysis_by_id_v1_ecoindexes__id__get","parameters":[{"required":true,"schema":{"title":"Unique identifier of the ecoindex analysis","type":"string","format":"uuid"},"name":"id","in":"path"}],"responses":{"200":{"description":"Get one ecoindex result by its id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiEcoindex"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"tags":["Infra"],"summary":"Get Healthcheck","description":"Check health status of components of the API (database...)","operationId":"Get_healthcheck_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiHealth"}}}}}}}},"components":{"schemas":{"ApiEcoindex":{"title":"ApiEcoindex","required":["size","nodes","requests","host"],"type":"object","properties":{"width":{"title":"Page Width","type":"integer","description":"Width of the simulated window in pixel"},"height":{"title":"Page Height","type":"integer","description":"Height of the simulated window in pixel"},"url":{"title":"Page url","maxLength":2083,"minLength":1,"type":"string","description":"Url of the analysed page","format":"uri"},"size":{"title":"Page size","minimum":0.0,"type":"number","description":"Is the size of the page and of the downloaded elements of the page in KB"},"nodes":{"title":"Page nodes","minimum":0.0,"type":"integer","description":"Is the number of the DOM elements in the page"},"requests":{"title":"Page requests","minimum":0.0,"type":"integer","description":"Is the number of external requests made by the page"},"grade":{"title":"Ecoindex grade","type":"string","description":"Is the corresponding ecoindex grade of the page (from A to G)"},"score":{"title":"Ecoindex score","maximum":100.0,"minimum":0.0,"type":"number","description":"Is the corresponding ecoindex score of the page (0 to 100)"},"ges":{"title":"Ecoindex GES equivalent","minimum":0.0,"type":"number","description":"Is the equivalent of greenhouse gases emission (in `gCO2e`) of the page"},"water":{"title":"Ecoindex Water equivalent","minimum":0.0,"type":"number","description":"Is the equivalent water consumption (in `cl`) of the page"},"date":{"title":"Analysis datetime","type":"string","description":"Date of the analysis","format":"date-time"},"page_type":{"title":"Page type","type":"string","description":"Is the type of the page, based ton the [opengraph type tag](https://ogp.me/#types)"},"id":{"title":"Id","type":"string","description":"Analysis ID of type `UUID`","format":"uuid"},"host":{"title":"Web page host","type":"string","description":"Host name of the web page"},"version":{"title":"API version","type":"integer","description":"Version number of the API used to run the test","default":1}}},"ApiHealth":{"title":"ApiHealth","required":["database"],"type":"object","properties":{"database":{"title":"Status of database","type":"boolean"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"Page_ApiEcoindex_":{"title":"Page[ApiEcoindex]","required":["items","total","page","size"],"type":"object","properties":{"items":{"title":"Items","type":"array","items":{"$ref":"#/components/schemas/ApiEcoindex"}},"total":{"title":"Total","minimum":0.0,"type":"integer"},"page":{"title":"Page","minimum":1.0,"type":"integer"},"size":{"title":"Size","minimum":1.0,"type":"integer"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WebPage":{"title":"WebPage","type":"object","properties":{"width":{"title":"Page Width","type":"integer","description":"Width of the simulated window in pixel"},"height":{"title":"Page Height","type":"integer","description":"Height of the simulated window in pixel"},"url":{"title":"Page url","maxLength":2083,"minLength":1,"type":"string","description":"Url of the analysed page","format":"uri"}}}}}}